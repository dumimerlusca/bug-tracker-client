(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,c){},40:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),r=c(30),s=c.n(r),l=(c(39),c(40),c(8)),i=c(1),o=function(){return Object(i.jsx)("header",{className:"login_header py-2 bg-primary-700 text-white",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"flex justify-between",children:[Object(i.jsx)("h1",{children:"BugTracker"}),Object(i.jsx)("div",{children:Object(i.jsx)("nav",{children:Object(i.jsxs)("ul",{className:"flex gap-3",children:[Object(i.jsx)("li",{children:Object(i.jsx)(l.b,{to:"/login",children:"Login"})}),Object(i.jsx)("li",{children:Object(i.jsx)(l.b,{to:"/register",children:"Register"})})]})})})]})})})},j=c(5),d=c(3),u=function(e,t){switch(t.type){case"SET_ALERT":return Object(d.a)(Object(d.a)({},e),{},{alert:t.payload});case"REMOVE_ALERT":return Object(d.a)(Object(d.a)({},e),{},{alert:null});default:return Object(d.a)({},e)}},b="REGISTER_SUCCESS",x="REGISTER_FAIL",p="LOGIN_FAIL",m="LOGIN_SUCCESS",h="USER_LOADED",O="REFRESH_TOKEN",f="AUTH_ERROR",y="LOGOUT",v="SET_LOADING",g="GET_USERS_SUCCESS",N="GET_USERS_FAIL",w="UPDATE_USER_SUCCESS",k="UPDATE_USER_FAIL",C="GET_PROJECTS_SUCCESS",_="GET_MY_PROJECTS_SUCCESS",T="GET_PROJECT_UCCESS",S="GET_PROJECT_FAIL",E="CREATE_PROJECT_SUCCESS",P="CREATE_PROJECT_FAIL",A="UPDATE_PROJECT_SUCCESS",D="UPDATE_PROJECT_FAIL",U="RESET_STATE",M="CLEAR_ALERTS",R="GET_TICKETS_SUCCESS",F="GET_TICKETS_FAIL",I="GET_MY_TICKETS_SUCCESS",L="GET_MY_TICKETS_FAIL",G="ADD_TICKET_SUCCESS",H="ADD_TICKET_FAIL",J="UPDATE_TICKET_SUCCESS",K="UPDATE_TICKET_FAIL",z="GET_TICKET_SUCCESS",V="GET_TICKET_FAIL",W="DELETE_TICKET_SUCCESS",B="DELETE_TICKET_FAIL",Y="GET_COMMENTS_SUCCESS",q="GET_COMMENTS_FAIL",Q="UPDATE_COMMENT_SUCCESS",X="UPDATE_COMMENT_FAIL",Z="ADD_COMMENT_SUCCESS",$="ADD_COMMENT_FAIL",ee="DELETE_COMMENT_SUCCESS",te="DELETE_COMMENT_FAIL",ce="SHOW_SIDE_MENU",ae="HIDE_SIDE_MENU",ne=Object(a.createContext)(),re=function(e){var t=e.children,c=Object(a.useReducer)(u,{alert:null}),n=Object(j.a)(c,2),r=n[0],s=n[1];return Object(i.jsx)(ne.Provider,{value:Object(d.a)(Object(d.a)({},r),{},{setAlert:function(e){s({type:"SET_ALERT",payload:e}),setTimeout((function(){s({type:"REMOVE_ALERT"})}),3e3)}}),children:t})},se=function(){return Object(a.useContext)(ne)},le=c(4),ie=c.n(le),oe=c(7),je=function(e,t){switch(t.type){case b:case m:return localStorage.setItem("accessToken",t.payload),Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:!0,alert:null,accessToken:t.payload,loading:!1});case x:case p:return localStorage.removeItem("accessToken"),Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:!1,alert:{message:t.payload,type:"danger"},accessToken:null,loading:!1});case f:return localStorage.removeItem("accessToken"),Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:!1,alert:null,accessToken:null,loading:!1});case h:return Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:!0,alert:null,user:t.payload,loading:!1});case y:return localStorage.removeItem("accessToken"),Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:!1,alert:null,accessToken:null,loading:!1,user:null});case O:return localStorage.setItem("accessToken",t.payload),Object(d.a)(Object(d.a)({},e),{},{alert:null,accessToken:t.payload,loading:!0});case M:return Object(d.a)(Object(d.a)({},e),{},{alert:null});case v:return Object(d.a)(Object(d.a)({},e),{},{loading:t.payload});case U:return Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:null,accessToken:null,alert:null,loading:!0,user:null});default:return Object(d.a)({},e)}},de=c(9),ue=c.n(de),be=function(e){e?ue.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete ue.a.defaults.headers.common.Authorization},xe=Object(a.createContext)(),pe=function(e){var t=e.children,c={isAuthenticated:null,accessToken:localStorage.getItem("accessToken"),alert:null,loading:!0,user:null},n=Object(a.useReducer)(je,c),r=Object(j.a)(n,2),s=r[0],l=r[1];Object(a.useEffect)((function(){N()}),[s.accessToken]);var o=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),c={headers:{"Content-type":"application/json"}},e.prev=2,e.next=5,ue.a.post("/auth/register",t,c);case 5:a=e.sent,l({type:b,payload:a.data.accessToken}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),l({type:x,payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),c={headers:{"Content-type":"application/json"}},e.prev=2,e.next=5,ue.a.post("/auth/login",t,c);case 5:a=e.sent,l({type:m,payload:a.data.accessToken}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),l({type:p,payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"Content-type":"application/json"}},e.prev=1,e.next=4,ue.a.post("/auth/logout",t);case 4:l({type:y}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),l({type:f});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),be(s.accessToken),e.prev=2,e.next=5,ue.a.post("/auth/me");case 5:t=e.sent,l({type:h,payload:t.data.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),l({type:f,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.post("/auth/refresh");case 3:(t=e.sent).data.accessToken&&l({type:O,payload:t.data.accessToken}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:f});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),k=function(e){l({type:v,payload:e})};return Object(i.jsx)(xe.Provider,{value:Object(d.a)(Object(d.a)({},s),{},{register:o,login:u,logout:g,loadUser:N,clearAlerts:function(){l({type:M})},checkRefreshToken:w,resetState:function(){l({type:U})}}),children:t})},me=function(){return Object(a.useContext)(xe)},he=function(){var e=se().alert;return e?Object(i.jsx)("div",{className:"alert p-2 alert-".concat(e.type),children:e.message}):null},Oe=c(6),fe=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(""),s=Object(j.a)(r,2),l=s[0],o=s[1],d=se().setAlert,u=me(),b=u.login,x=u.isAuthenticated,p=u.alert,m=u.clearAlerts,h=u.loading,O=Object(Oe.h)();Object(a.useEffect)((function(){x&&!h&&O("/dashboard")}),[x,h]),Object(a.useEffect)((function(){p&&(d(p),m())}),[p]);var f=function(e){switch(e.target.name){case"email":n(e.target.value);break;case"password":o(e.target.value);break;default:return}};return Object(i.jsxs)("form",{onSubmit:function(e){!function(e){e.preventDefault(),""!==c.trim()&&""!==l.trim()?b({email:c,password:l}):d({message:"Please enter email and password",type:"danger"})}(e)},className:"form",children:[Object(i.jsx)("h1",{className:"text-3xl font-semibold mb-7 text-center",children:"Login"}),Object(i.jsx)(he,{}),Object(i.jsxs)("div",{className:"mb-2",children:[Object(i.jsx)("label",{htmlFor:"email",className:"form_label",children:"Email"}),Object(i.jsx)("input",{onChange:function(e){f(e)},name:"email",value:c,className:"form_input",type:"email"})]}),Object(i.jsxs)("div",{className:"mb-2",children:[Object(i.jsx)("label",{htmlFor:"password",className:"form_label",children:"Password"}),Object(i.jsx)("input",{onChange:function(e){f(e)},name:"password",value:l,className:"form_input",type:"password"})]}),Object(i.jsx)("div",{children:Object(i.jsxs)("h3",{children:["Login as demo",Object(i.jsx)("button",{className:"my-3 ml-3 text-blue-600 font-bold\r hover:opacity-75 transition-opacity",onClick:function(){b({email:"adminDemo@gmail.com",password:"123456"})},type:"button",children:"admin"})]})}),Object(i.jsx)("input",{type:"submit",className:"mt-5 py-1 text-center w-full hover:opacity-75 bg-gray-900 text-white"})]})},ye=function(){return Object(i.jsx)(a.Fragment,{children:Object(i.jsxs)("main",{className:"",children:[Object(i.jsx)(o,{}),Object(i.jsx)("div",{className:"form_container",children:Object(i.jsx)(fe,{})})]})})},ve=c(10),ge=function(){var e=me(),t=e.register,c=e.alert,n=e.clearAlerts,r=e.isAuthenticated,s=se().setAlert,l=Object(a.useState)({name:"",email:"",password:"",password2:""}),o=Object(j.a)(l,2),u=o[0],b=o[1],x=u.name,p=u.email,m=u.password,h=u.password2,O=Object(Oe.h)();Object(a.useEffect)((function(){if(c){if("Duplicated fields value entered"===c.message)return s({message:"User already exists !",type:"danger"}),void n();s(c),n()}}),[c]),Object(a.useEffect)((function(){r&&O("/")}),[r]);var f=function(e,t){b(Object(d.a)(Object(d.a)({},u),{},Object(ve.a)({},e.name,t)))};return Object(i.jsxs)("form",{onSubmit:function(e){!function(e){e.preventDefault(),""!==x.trim()&&""!==p.trim()&&""!==m.trim()&&""!==h.trim()?m===h?t({name:x,email:p,password:m}):s({message:"Passwords do not match",type:"danger"}):s({message:"Please fill out all the fields",type:"danger"})}(e)},className:"form",children:[Object(i.jsx)("h1",{className:"text-3xl font-semibold mb-7 text-center",children:"Register"}),Object(i.jsx)(he,{}),Object(i.jsxs)("div",{className:"mb-2",children:[Object(i.jsx)("label",{htmlFor:"name",className:"form_label",children:"Name"}),Object(i.jsx)("input",{onChange:function(e){return f(e.target,e.target.value)},value:x,className:"form_input",name:"name",id:"name",type:"text"})]}),Object(i.jsxs)("div",{className:"mb-2",children:[Object(i.jsx)("label",{htmlFor:"email",className:"form_label",children:"Email"}),Object(i.jsx)("input",{onChange:function(e){return f(e.target,e.target.value)},value:p,className:"form_input",name:"email",id:"email",type:"text"})]}),Object(i.jsxs)("div",{className:"mb-2",children:[Object(i.jsx)("label",{htmlFor:"password",className:"form_label",children:"Password"}),Object(i.jsx)("input",{onChange:function(e){return f(e.target,e.target.value)},value:m,className:"form_input",name:"password",id:"password",type:"password",minLength:"6"})]}),Object(i.jsxs)("div",{className:"mb-2",children:[Object(i.jsx)("label",{htmlFor:"password2",className:"form_label",children:"Confirm password"}),Object(i.jsx)("input",{onChange:function(e){return f(e.target,e.target.value)},value:h,className:"form_input",name:"password2",id:"password2",type:"password",minLength:"6"})]}),Object(i.jsx)("input",{type:"submit",className:"mt-5 py-1 text-center w-full hover:opacity-75 bg-gray-900 text-white"})]})},Ne=function(){return Object(i.jsx)(a.Fragment,{children:Object(i.jsxs)("main",{className:"",children:[Object(i.jsx)(o,{}),Object(i.jsx)("div",{className:"form_container",children:Object(i.jsx)(ge,{})})]})})},we=c.p+"static/media/spinner.972fdb14.svg",ke=function(){return Object(i.jsx)("img",{src:we,alt:"Spinner"})},Ce=function(e){var t=e.children,c=me(),a=c.isAuthenticated;return c.loading?Object(i.jsx)("div",{className:"flex items-center justify-center w-full h-screen",children:Object(i.jsx)(ke,{})}):a?t:Object(i.jsx)(Oe.a,{to:"/login"})},_e=c(32),Te=c(14),Se=c(31),Ee=c(20),Pe=c(33),Ae=function(e,t){switch(t.type){case C:return Object(d.a)(Object(d.a)({},e),{},{projects:t.payload,loading:!1});case _:return Object(d.a)(Object(d.a)({},e),{},{myProjects:t.payload,loading:!1});case"GET_PROJECTS_FAIL":return Object(d.a)(Object(d.a)({},e),{},{projects:null,loading:!1});case T:return Object(d.a)(Object(d.a)({},e),{},{currentProject:t.payload,loading:!1});case S:return Object(d.a)(Object(d.a)({},e),{},{currentProject:null,loading:!1});case P:return Object(d.a)(Object(d.a)({},e),{},{alert:{message:t.payload,type:"danger"},loading:!1});case E:return Object(d.a)(Object(d.a)({},e),{},{alert:{message:"Project created",type:"success"},loading:!1});case A:return Object(d.a)(Object(d.a)({},e),{},{alert:{message:"Project updated!",type:"success"},loading:!1});case D:return Object(d.a)(Object(d.a)({},e),{},{alert:{message:t.payload,type:"danger"},loading:!1});case M:return Object(d.a)(Object(d.a)({},e),{},{alert:null});case v:return Object(d.a)(Object(d.a)({},e),{},{loading:t.payload});case U:return Object(d.a)(Object(d.a)({},e),{},{projects:null,myProjects:null,currentProject:null,loading:!0,error:null});default:return Object(d.a)({},e)}},De=Object(a.createContext)(),Ue=function(e){var t=e.children,c=Object(a.useReducer)(Ae,{projects:null,myProjects:null,currentProject:null,loading:!1,alert:null}),n=Object(j.a)(c,2),r=n[0],s=n[1],l=function(){var e=Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ue.a.get("/projects");case 4:t=e.sent,s({type:C,payload:t.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ue.a.get("/projects?user=".concat(t));case 4:c=e.sent,s({type:_,payload:c.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-type":"application/json"}},e.prev=1,e.next=4,ue.a.post("/projects",t,c);case 4:e.sent,s({type:E}),l(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:P,payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ue.a.get("/projects/".concat(t));case 4:c=e.sent,s({type:T,payload:c.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:S});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.delete("/projects/".concat(t));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(oe.a)(ie.a.mark((function e(t,c){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),a={headers:{"Content-type":"application/json"}},e.prev=2,e.next=5,ue.a.put("/projects/".concat(t),c,a);case 5:e.sent,s({type:A}),b(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),s({type:D,payload:e.t0.response.data.error});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,c){return e.apply(this,arguments)}}(),m=function(e){s({type:v,payload:e})};return Object(i.jsx)(De.Provider,{value:Object(d.a)(Object(d.a)({},r),{},{getProjects:l,getProject:b,getMyProjects:o,resetState:function(){s({type:U})},createProject:u,clearAlerts:function(){s({type:M})},deleteProject:x,updateProject:p}),children:t})},Me=function(){return Object(a.useContext)(De)},Re=function(e,t){switch(t.type){case R:return Object(d.a)(Object(d.a)({},e),{},{tickets:t.payload.data,currentPage:t.payload.page,totalPages:t.payload.totalPages,loading:!1,alert:null});case F:return Object(d.a)(Object(d.a)({},e),{},{tickets:null,loading:!1,currentPage:1,totalPages:null,alert:t.payload});case z:return Object(d.a)(Object(d.a)({},e),{},{currentTicket:t.payload,loading:!1,alert:null});case V:return Object(d.a)(Object(d.a)({},e),{},{currentTicket:null,loading:!1,alert:t.payload});case I:return Object(d.a)(Object(d.a)({},e),{},{myTickets:t.payload.data,myTicketsCurrentPage:t.payload.page,myTicketsTotalPages:t.payload.totalPages,loading:!1,alert:null});case L:return Object(d.a)(Object(d.a)({},e),{},{myTickets:null,myTicketsCurrentpage:1,myTicketsTotalPages:null,loading:!1,alert:null});case G:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:"Ticket added!",type:"success"}});case H:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:t.payload,type:"danger"}});case J:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:"Ticket updated!",type:"success"}});case K:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:t.payload,type:"danger"}});case W:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:"Ticket deleted!",type:"success"}});case B:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:t.payload,type:"danger"}});case v:return Object(d.a)(Object(d.a)({},e),{},{loading:t.payload});case M:return Object(d.a)(Object(d.a)({},e),{},{alert:null});case U:return Object(d.a)(Object(d.a)({},e),{},{tickets:null,loading:!1,currentTicket:null,currentPage:1,totalPages:null,myTickets:null,myTicketsCurrentPage:1,myTIcketsTotalPages:null,alert:null});default:return Object(d.a)({},e)}},Fe=Object(a.createContext)(),Ie=function(e){var t=e.children,c=Object(a.useReducer)(Re,{tickets:null,loading:!1,currentTicket:null,currentPage:1,totalPages:null,myTickets:null,myTicketsCurrentPage:1,myTIcketsTotalPages:null,alert:null}),n=Object(j.a)(c,2),r=n[0],s=n[1],l=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ue.a.get("/tickets".concat(t||""));case 4:c=e.sent,s({type:R,payload:c.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:F,payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(oe.a)(ie.a.mark((function e(t,c){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ue.a.get("/tickets?user=".concat(t).concat(c||""));case 4:a=e.sent,s({type:I,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:L});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,c){return e.apply(this,arguments)}}(),u=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ue.a.get("/tickets/".concat(t));case 4:c=e.sent,s({type:z,payload:c.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:V,payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(oe.a)(ie.a.mark((function e(t,c){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),a={headers:{"Content-type":"application/json"}},e.prev=2,e.next=5,ue.a.post("/projects/".concat(t,"/tickets"),c,a);case 5:e.sent,s({type:G}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s({type:H,payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,c){return e.apply(this,arguments)}}(),x=function(){var e=Object(oe.a)(ie.a.mark((function e(t,c){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),a={headers:{"Content-type":"application/json"}},e.prev=2,e.next=5,ue.a.put("/tickets/".concat(t),c,a);case 5:e.sent,s({type:J}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s({type:K,payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,c){return e.apply(this,arguments)}}(),p=function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ue.a.delete("/tickets/".concat(t));case 4:s({type:W}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s({type:B,payload:e.t0.response.data.error});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){s({type:v,payload:e})};return Object(i.jsx)(Fe.Provider,{value:Object(d.a)(Object(d.a)({},r),{},{getTickets:l,addTicket:b,clearAlerts:function(){s({type:M})},getMyTickets:o,getTicket:u,updateTicket:x,deleteTicket:p,resetState:function(){s({type:U})}}),children:t})},Le=function(){return Object(a.useContext)(Fe)},Ge=function(e,t){switch(t.type){case Y:return Object(d.a)(Object(d.a)({},e),{},{comments:t.payload,loading:!1});case q:return Object(d.a)(Object(d.a)({},e),{},{comments:null,loading:!1});case Z:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:"Comment added!",type:"success"}});case X:case te:case $:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:t.payload,type:"danger"}});case ee:case Q:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:"Comment deleted!",type:"success"}});case v:return Object(d.a)(Object(d.a)({},e),{},{loading:t.payload});case M:return Object(d.a)(Object(d.a)({},e),{},{alert:null});case U:return Object(d.a)(Object(d.a)({},e),{},{comments:[],alert:null,loading:!1});default:return Object(d.a)({},e)}},He=Object(a.createContext)(),Je=function(e){var t=e.children,c=Object(a.useReducer)(Ge,{comments:[],alert:null,loading:!1}),n=Object(j.a)(c,2),r=n[0],s=n[1],l=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,ue.a.get("/tickets/".concat(t,"/comments"));case 4:c=e.sent,s({type:Y,payload:c.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:q,payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(oe.a)(ie.a.mark((function e(t,c){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-type":"application/json"}},e.prev=1,e.next=4,ue.a.post("/tickets/".concat(t,"/comments"),c,a);case 4:s({type:Z}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s({type:$,payload:e.t0.response.data.error});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,c){return e.apply(this,arguments)}}(),u=function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.a.delete("/comments/".concat(t));case 3:s({type:ee}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s({type:te,payload:e.t0.response.data.error});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(oe.a)(ie.a.mark((function e(t,c){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-type":"application/json"}},e.prev=1,e.next=4,ue.a.put("/comments/".concat(t),c,a);case 4:s({type:Q}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s({type:X});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,c){return e.apply(this,arguments)}}(),x=function(e){s({type:v,payload:e})};return Object(i.jsx)(He.Provider,{value:Object(d.a)(Object(d.a)({},r),{},{getComments:l,addComment:o,deleteComment:u,updateComment:b,clearAlerts:function(){s({type:M})},resetState:function(){s({type:U})}}),children:t})},Ke=function(){return Object(a.useContext)(He)},ze=function(){var e=me().logout,t=me(),c=Me(),a=Le(),n=Ke(),r=Object(Oe.h)(),s=function(){var s=Object(oe.a)(ie.a.mark((function s(){return ie.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t.resetState(),c.resetState(),a.resetState(),n.resetState(),s.next=6,e();case 6:r("/login");case 7:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();return Object(i.jsx)("button",{className:"py-1 px-10 hover:opacity-75 mt-5 transition-all mx-auto block bg-primary-600 rounded",onClick:s,children:"Logout"})},Ve=function(e,t){switch(t.type){case ce:return Object(d.a)(Object(d.a)({},e),{},{isSideMenuVisible:!0});case ae:return Object(d.a)(Object(d.a)({},e),{},{isSideMenuVisible:!1});default:return Object(d.a)({},e)}},We=Object(a.createContext)(),Be=function(e){var t=e.children,c=Object(a.useReducer)(Ve,{isSideMenuVisible:!0}),n=Object(j.a)(c,2),r=n[0],s=n[1];return Object(i.jsx)(We.Provider,{value:Object(d.a)(Object(d.a)({},r),{},{showSideMenu:function(){s({type:ce})},hideSideMenu:function(){s({type:ae})}}),children:t})},Ye=function(){return Object(a.useContext)(We)},qe=function(){var e=me().user,t=Ye(),c=t.isSideMenuVisible,n=t.hideSideMenu;return Object(a.useEffect)((function(){window.innerWidth<1280&&n()}),[]),Object(i.jsxs)("div",{className:"side_menu bg-primary-500 shadow-xl z-20 text-white ".concat(c?"active":null),children:[Object(i.jsxs)("div",{className:"top_message w-full shadow-xl py-5 px-3 flex items-center justify-center",children:[Object(i.jsx)("span",{children:Object(i.jsx)(Se.a,{className:"text-7xl text-primary-900"})}),Object(i.jsxs)("h1",{className:"text-3xl text-center font-semibold py-5",children:["Welcome  ",e.name,"!"]})]}),Object(i.jsx)("nav",{className:"side_nav w-full",children:Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:Object(i.jsxs)(l.b,{to:"/dashboard",className:"side_menu_link",onClick:n,children:[Object(i.jsx)(_e.a,{}),Object(i.jsx)("span",{className:"",children:"Dashboard Home"})]})}),("admin"===e.role||"adminDemo"===e.role)&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("li",{children:Object(i.jsxs)(l.b,{to:"/dashboard/manageRoles",className:"side_menu_link",onClick:n,children:[Object(i.jsx)(Te.e,{}),Object(i.jsx)("span",{className:"",children:"Manage Role Assignment"})]})}),Object(i.jsx)("li",{children:Object(i.jsxs)(l.b,{to:"/dashboard/projects",className:"side_menu_link",onClick:n,children:[Object(i.jsx)(Ee.b,{}),Object(i.jsx)("span",{className:"",children:"All Projects"})]})})]}),Object(i.jsx)("li",{children:Object(i.jsxs)(l.b,{to:"/dashboard/projects/myProjects",className:"side_menu_link flex",onClick:n,children:[Object(i.jsx)(Te.b,{}),Object(i.jsx)("span",{className:"",children:"My Projects"})]})}),Object(i.jsx)("li",{children:Object(i.jsxs)(l.b,{to:"/dashboard/tickets",className:"side_menu_link",onClick:n,children:[Object(i.jsx)(Pe.a,{}),Object(i.jsx)("span",{className:"",children:"My Tickets"})]})}),Object(i.jsx)("li",{children:Object(i.jsx)(ze,{})})]})})]})},Qe=function(){var e=me().user,t=Ye(),c=t.showSideMenu,a=t.hideSideMenu,n=t.isSideMenuVisible;return Object(i.jsx)("header",{className:"bg-primary-700 py-3 sticky z-10 top-0 text-white shadow-md",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"flex justify-between",children:[Object(i.jsxs)("h3",{children:["Loggend is as: ",Object(i.jsx)("span",{className:"font-semibold",children:e.role})]}),Object(i.jsxs)("div",{className:"flex gap-5 items-center",children:[Object(i.jsx)("nav",{children:Object(i.jsx)("ul",{className:"flex",children:Object(i.jsx)("li",{children:Object(i.jsx)(l.b,{to:"/dashboard/userProfile",children:Object(i.jsx)(Te.d,{className:"text-2xl"})})})})}),Object(i.jsx)("button",{className:"side_menu_toggler",onClick:function(){n?a():c()},children:Object(i.jsx)(Te.a,{className:"text-3xl hover:opacity-75 transition-opacity"})})]})]})})})},Xe=c(15),Ze=function(e,t){switch(t.type){case g:return Object(d.a)(Object(d.a)({},e),{},{users:t.payload,loading:!1,alert:null});case N:return Object(d.a)(Object(d.a)({},e),{},{users:null,loading:!1,alert:{message:t.payload,type:"danger"}});case w:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:"User updated!",type:"success"}});case k:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,alert:{message:t.payload,type:"danger"}});case M:return Object(d.a)(Object(d.a)({},e),{},{alert:null});case v:return Object(d.a)(Object(d.a)({},e),{},{loading:t.payload});case U:return Object(d.a)(Object(d.a)({},e),{},{users:null,selectedUser:null,loading:!1,alert:null});default:return Object(d.a)({},e)}},$e=Object(a.createContext)(),et=function(e){var t=e.children,c=Object(a.useReducer)(Ze,{users:null,selectedUser:null,loading:!1,alert:null}),n=Object(j.a)(c,2),r=n[0],s=n[1],l=me(),o=(l.loadUser,l.checkRefreshToken,function(){var e=Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,ue.a.get("/users");case 4:t=e.sent,s({type:g,payload:t.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:N,payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()),u=function(){var e=Object(oe.a)(ie.a.mark((function e(t,c){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),a={headers:{"Content-type":"application/json"}},e.prev=2,e.next=5,ue.a.put("/users/".concat(t),c,a);case 5:e.sent,s({type:w}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s({type:k,payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,c){return e.apply(this,arguments)}}(),b=function(e){s({type:v,payload:e})};return Object(i.jsx)($e.Provider,{value:Object(d.a)(Object(d.a)({},r),{},{getUsers:o,updateUser:u,clearAlerts:function(){s({type:M})},resetState:function(){s({type:U})}}),children:t})},tt=function(){return Object(a.useContext)($e)},ct=function(){var e=Object(Oe.h)(),t=tt().getUsers,c=Me(),n=c.getProjects,r=c.getMyProjects,s=Le(),l=s.getTickets,o=s.getMyTickets,d=me().user,u=Object(a.useState)(!0),b=Object(j.a)(u,2),x=b[0],p=b[1];Object(a.useEffect)((function(){m()}),[]);var m=function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return e.next=4,n();case 4:return e.next=6,l();case 6:return e.next=8,o(d._id);case 8:return e.next=10,r(d._id);case 10:p(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return x?Object(i.jsx)("div",{className:"flex items-center justify-center w-full h-screen",children:Object(i.jsx)(ke,{})}):Object(i.jsxs)(a.Fragment,{children:[Object(i.jsx)(qe,{}),Object(i.jsxs)("div",{className:"main_container",children:[Object(i.jsx)(Qe,{}),Object(i.jsxs)("div",{className:"flex gap-2 m-2",children:[Object(i.jsx)("button",{onClick:function(){e(-1)},children:Object(i.jsx)(Xe.a,{className:"text-2xl hover:opacity-75"})}),Object(i.jsx)("button",{onClick:function(){e(1)},children:Object(i.jsx)(Xe.b,{className:"text-2xl hover:opacity-75"})})]}),Object(i.jsx)("div",{className:"container",children:Object(i.jsx)(Oe.b,{})})]})]})},at=function(e){var t=e.projects;return Object(i.jsxs)("table",{className:"mx-auto text-left w-full",children:[Object(i.jsx)("thead",{className:"w-full",children:Object(i.jsxs)("tr",{className:"bg-primary-500 text-white font-thin border-b-2 border-gray-800 border-opacity-50 w-full",children:[Object(i.jsx)("th",{children:"Project name"}),Object(i.jsx)("th",{children:"Description"}),Object(i.jsx)("th",{})]})}),Object(i.jsx)("tbody",{children:t&&t.map((function(e){var t=e.name,c=e.description,a=e._id;return Object(i.jsxs)("tr",{className:"border-b border-gray-400 border-opacity-25",children:[Object(i.jsx)("td",{className:"font-semibold text-primary-900 py-5 text-xl",children:t.length>50?"".concat(t.slice(0,30),"..."):t}),Object(i.jsx)("td",{className:"font-thin",children:c.length>50?"".concat(c.slice(0,50),"..."):c}),Object(i.jsx)("td",{className:"",children:Object(i.jsx)("ul",{className:"list-disc",children:Object(i.jsx)("li",{children:Object(i.jsx)(l.b,{to:"/dashboard/projects/".concat(a),children:"Details"})})})})]},a)}))})]})},nt=function(){var e=Me().projects;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(l.b,{to:"/dashboard/projects/createProject",className:"py-2 inline-block px-5 bg-secondary-500 ml-5 mt-10 hover:opacity-75 text-white",children:"Create new project"}),Object(i.jsx)("div",{className:"overflow-x-auto mt-10 w-full shadow-2xl",children:Object(i.jsx)(at,{projects:e})})]})},rt=c(13),st=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],lt=["January","February","March","April","May","June","July","August","September","October","November","December"],it=function(e){var t=new Date(e),c=st[t.getDay()],a=lt[t.getMonth()],n=t.getFullYear(),r=t.getHours(),s=t.getMinutes(),l=t.getSeconds();return"".concat(c,", ").concat(r,":").concat(s,":").concat(l,", ").concat(a," ").concat(n)},ot=function(e){var t=e.ticket,c=t.name,a=t.description,n=t.submitter,r=t.createdAt,s=t.priority,l=t.status,o=t.developer,j=t.project,d=t._id,u=Object(Oe.h)(),b=me().user;return Object(i.jsxs)("tr",{className:"border-b border-gray-400 border-opacity-25 cursor-pointer\n    ".concat(o&&b._id===o._id?"bg-secondary-100":null,"\n    "),onClick:function(){u("/dashboard/tickets/".concat(d))},children:[Object(i.jsx)("td",{children:n.name}),Object(i.jsxs)("td",{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{className:"py-0 px-2 rounded-xl border-2 bg-white shadow-md font-bold text-sm\n            ".concat("submitted"===l?"text-black":null,"\n            ").concat("in progress"===l?"text-yellow-500":null,"\n            ").concat("in review"===l?"text-blue-700":null,"\n            ").concat("done"===l?"text-blue-300":null,"\n          "),children:l}),Object(i.jsx)("span",{className:"ml-3 text-md font-semibold",children:c.length>30?"".concat(c.slice(0,30),"..."):c})]}),Object(i.jsx)("p",{className:"font-thin text-sm p-1",children:a.length>30?"".concat(a.slice(0,30),"..."):a})]}),Object(i.jsx)("td",{children:j.name}),Object(i.jsx)("td",{children:Object(i.jsx)("span",{className:"py-1 px-2 font-thin rounded-md\n        ".concat("urgent"===s?"bg-red-800 text-white":null,"\n        ").concat("high"===s?"bg-red-500 text-white":null,"\n        ").concat("medium"===s?"bg-yellow-400 text-dark":null,"\n        ").concat("low"===s?"bg-gray-500 text-dark":null,"\n        "),children:s})}),Object(i.jsx)("td",{children:o?o.name:"-"}),Object(i.jsx)("td",{children:it(r).length>25?"".concat(it(r).slice(0,25),"... "):it(r)})]})},jt=c(34),dt=function(e){var t=e.tableBody,c=Object(a.useState)(""),n=Object(j.a)(c,2),r=(n[0],n[1],function(e){if(t.current){Array.from(t.current.children).map((function(t){t.textContent.includes(e)?t.style.display="table-row":t.style.display="none"}))}});return Object(i.jsxs)("div",{className:"inline-flex gap-2 items-center mb-5",children:[Object(i.jsx)(Xe.d,{}),Object(i.jsx)("input",{type:"text",className:"py-2 px-5 shadow-md rounded-md focus:ring-2 focus:outline-none focus:ring-blue-400",style:{minWidth:"300px"},onChange:function(e){!function(e){r(e.target.value)}(e)},placeholder:"Search..."})]})},ut=function(e){var t=e.tickets,c=e.showProject,n=Object(a.useState)(null),r=Object(j.a)(n,2),s=(r[0],r[1],Object(a.useState)(!1)),l=Object(j.a)(s,2),o=l[0],d=l[1],u=Object(a.useState)(Object(rt.a)(t)),b=Object(j.a)(u,2),x=b[0],p=b[1],m=Object(a.useRef)();Object(a.useEffect)((function(){p(Object(rt.a)(t))}),[t]);var h=function(e){if(d(!1),"all"!==e.target.textContent){var c=t.filter((function(t){return t.priority===e.target.textContent}));p(c)}else p(Object(rt.a)(t))};return Object(i.jsxs)("div",{children:[Object(i.jsx)(dt,{tableBody:m}),Object(i.jsx)("div",{className:"overflow-x-auto shadow-2xl",style:{minHeight:"300px"},children:Object(i.jsxs)("table",{className:"w-full",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{className:"bg-primary-500 text-white font-thin border-b-2 border-gray-800 border-opacity-50",children:[Object(i.jsx)("th",{children:"Submitter"}),Object(i.jsx)("th",{children:"Description"}),Object(i.jsxs)("th",{children:[" ",c?"Project":""," "]}),Object(i.jsxs)("th",{className:"relative",children:[Object(i.jsxs)("button",{className:"font-bold",onClick:function(){d(!o)},children:[Object(i.jsx)(jt.a,{}),"Priority"]}),o&&Object(i.jsx)("div",{className:"absolute shadow-md bg-white text-black",children:Object(i.jsxs)("ul",{className:"divide-y-2",children:[Object(i.jsx)("li",{className:"py-2 px-10 capitalize",onClick:function(e){h(e)},children:"urgent"}),Object(i.jsx)("li",{className:"py-2 capitalize",onClick:function(e){h(e)},children:"high"}),Object(i.jsx)("li",{className:"py-2 capitalize",onClick:function(e){h(e)},children:"medium"}),Object(i.jsx)("li",{className:"py-2 capitalize",onClick:function(e){h(e)},children:"low"}),Object(i.jsx)("li",{className:"py-2 capitalize",onClick:function(e){h(e)},children:"all"})]})})]}),Object(i.jsx)("th",{children:"Developer"}),Object(i.jsx)("th",{children:"Created at"})]})}),Object(i.jsx)("tbody",{ref:m,children:x.map((function(e){return Object(i.jsx)(ot,{ticket:e},e._id)}))})]})})]})};ut.defaultProps={showProject:!0};var bt=ut,xt=function(e){var t=e.users,c=e.handleClick,a=e.usersList;return Object(i.jsxs)("table",{className:"w-full text-left shadow-md",style:{minWidth:"700px"},children:[Object(i.jsx)("thead",{className:"table table-fixed",children:Object(i.jsxs)("tr",{className:"w-full table table-fixed bg-primary-500 text-white border-b-2 border-gray-800 border-opacity-50",children:[Object(i.jsx)("th",{children:"Name"}),Object(i.jsx)("th",{children:"Email"}),Object(i.jsx)("th",{children:"Role"})]})}),Object(i.jsx)("tbody",{ref:a,className:"block overflow-auto table-fixed",style:{maxHeight:"300px"},children:t&&t.map((function(e){var t=e.name,a=e._id,n=e.email,r=e.role;return Object(i.jsxs)("tr",{onClick:function(e){c&&c(e,a)},className:"w-full table table-fixed border-b border-gray-400 border-opacity-25 cursor-pointer",children:[Object(i.jsx)("td",{children:t}),Object(i.jsx)("td",{children:n}),Object(i.jsx)("td",{children:r})]},a)}))})]})},pt=function(){var e=Me().currentProject,t=e.users,c=e.tickets;return Object(i.jsx)("div",{className:"py-10",children:Object(i.jsxs)("div",{className:"flex flex-col gap-5",children:[Object(i.jsxs)("div",{className:"flex-1",children:[Object(i.jsxs)("div",{className:"p-5 rounded-md",children:[Object(i.jsx)("h2",{className:"text-xl",children:"Assigned Personnel"}),Object(i.jsx)("p",{className:"font-thin",children:"Current Users on this project"})]}),Object(i.jsx)("div",{className:"overflow-x-auto w-full shadow-md",children:Object(i.jsx)(xt,{users:t})})]}),Object(i.jsxs)("div",{className:"flex-1",children:[Object(i.jsx)("div",{className:"p-5 rounded-md",children:Object(i.jsx)("h2",{className:"text-xl",children:"Tickets for this project"})}),Object(i.jsx)(bt,{tickets:c,showProject:!1})]})]})})},mt=function(){var e=Me(),t=e.currentProject,c=e.updateProject,n=e.alert,r=e.clearAlerts,s=tt().users,l=Object(Oe.i)().id,o=se().setAlert,d=Object(a.useState)(!1),u=Object(j.a)(d,2),b=u[0],x=u[1],p=Object(a.useState)(Object(rt.a)(t.users)),m=Object(j.a)(p,2),h=m[0],O=m[1];Object(a.useEffect)((function(){n&&(o(n),r())}),[n]);var f=function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),x(!0),e.next=4,c(l,{users:h});case 4:x(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return b?Object(i.jsx)("div",{className:"w-full h-screen flex justify-center items-center",children:Object(i.jsx)(ke,{})}):Object(i.jsxs)("form",{onSubmit:function(e){f(e)},children:[Object(i.jsx)("h1",{className:"text-2xl p-10",children:"Manage users in project"}),Object(i.jsxs)("div",{children:[Object(i.jsx)(he,{}),Object(i.jsxs)("div",{className:"flex justify-center gap-5",children:[Object(i.jsx)("input",{className:"py-2 px-10 bg-secondary-500 mt-5 text-white",type:"submit",value:"Submit"}),Object(i.jsx)("button",{className:"py-2 px-10 bg-red-500 mt-5 text-white",onClick:function(e){!function(e){e.preventDefault(),O(Object(rt.a)(t.users)),o({message:"Users reset success!",type:"info"})}(e)},children:"Reset"})]}),Object(i.jsxs)("div",{className:"flex flex-col shadow-sm gap-5",children:[Object(i.jsxs)("div",{className:"flex-1",children:[Object(i.jsx)("h1",{className:"text-xl p-5",children:"Users in project"}),Object(i.jsxs)("table",{className:"w-full text-left shadow-md",style:{minWidth:"700px"},children:[Object(i.jsx)("thead",{className:"table table-fixed",children:Object(i.jsxs)("tr",{className:"w-full table table-fixed bg-secondary-500 text-white border-b-2 border-gray-800 border-opacity-50",children:[Object(i.jsx)("th",{children:"Name"}),Object(i.jsx)("th",{children:"Email"}),Object(i.jsx)("th",{children:"Role"})]})}),Object(i.jsx)("tbody",{className:"block overflow-auto table-fixed",style:{maxHeight:"300px"},children:h&&h.map((function(e){var t=e.name,c=e._id,a=e.email,n=e.role;return Object(i.jsxs)("tr",{onClick:function(e){!function(e){O(h.filter((function(t){return t._id!==e})))}(c)},className:"w-full table table-fixed border-b border-gray-400 border-opacity-25 cursor-pointer",children:[Object(i.jsx)("td",{children:t}),Object(i.jsx)("td",{children:a}),Object(i.jsx)("td",{children:n})]},c)}))})]})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{className:"text-xl p-3 pl-5",children:"All users"}),Object(i.jsx)("h3",{className:"p-2",children:"Select new users for the project"}),Object(i.jsxs)("table",{className:"w-full text-left mt-5 shadow-md",children:[Object(i.jsx)("thead",{className:"table table-fixed",children:Object(i.jsxs)("tr",{className:"w-full table table-fixed bg-primary-500 text-white border-b-2 border-gray-800 border-opacity-50",children:[Object(i.jsx)("th",{children:"Name"}),Object(i.jsx)("th",{children:"Email"}),Object(i.jsx)("th",{children:"Role"})]})}),Object(i.jsx)("tbody",{className:"block overflow-auto table-fixed",style:{maxHeight:"300px"},children:s&&s.map((function(e){var t=e.name,c=e._id,a=e.email,n=e.role;return Object(i.jsxs)("tr",{onClick:function(t){!function(e){if(h.find((function(t){return t._id===e._id})))o({message:"User already selected",type:"danger"});else{var t=Object(rt.a)(h);t.push(e),O(t)}}(e)},className:"w-full table table-fixed border-b border-gray-400 border-opacity-25 cursor-pointer",children:[Object(i.jsx)("td",{children:t}),Object(i.jsx)("td",{children:a}),Object(i.jsx)("td",{children:n})]},c)}))})]})]})]})]})]})},ht=function(){var e=Me(),t=e.updateProject,c=e.loading,n=e.alert,r=e.clearAlerts,s=e.currentProject,l=se().setAlert,o=Object(Oe.i)().id,u=Object(a.useState)({name:s.name,description:s.description}),b=Object(j.a)(u,2),x=b[0],p=b[1];Object(a.useEffect)((function(){n&&(l(n),r())}),[n]);var m=function(e){p(Object(d.a)(Object(d.a)({},x),{},Object(ve.a)({},e.target.id,e.target.value)))};return c?Object(i.jsx)("div",{className:"flex h-screen justify-center items-center",children:Object(i.jsx)(ke,{})}):Object(i.jsx)("div",{className:"mt-10",children:Object(i.jsxs)("form",{onSubmit:function(e){!function(e){e.preventDefault(),t(o,x)}(e)},children:[Object(i.jsx)(he,{}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"name",className:"form_label",children:"Project name"}),Object(i.jsx)("input",{type:"text",id:"name",className:"form_input",value:x.name,onChange:function(e){m(e)}})]}),Object(i.jsxs)("div",{className:"mt-5",children:[Object(i.jsx)("label",{htmlFor:"description",className:"form_label",children:"Project Description"}),Object(i.jsx)("input",{type:"text",id:"description",className:"form_input",value:x.description,onChange:function(e){m(e)}})]}),Object(i.jsx)("input",{type:"submit",className:"m-10 py-2 px-5 bg-secondary-500 text-white hover:opacity-75",value:"Submit changes"})]})})},Ot=function(e){var t=e.children,c=me().user;return["admin","project manager","adminDemo"].includes(c.role)?t:Object(i.jsx)("h1",{children:"Not authorized to access this route. Admin and project managers only!"})},ft=function(){var e=Le(),t=e.addTicket,c=e.alert,n=e.getTickets,r=e.getMyTickets,s=Me().getProject,l=me().user,o=se().setAlert,u=Object(Oe.i)().id,b=Object(a.useState)({name:"",description:"",priority:"high"}),x=Object(j.a)(b,2),p=x[0],m=x[1],h=p.name,O=p.description,f=p.priority;Object(a.useEffect)((function(){c&&o(c)}),[c]);var y=function(){var e=Object(oe.a)(ie.a.mark((function e(c){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),""!==h.trim()&&""!==O.trim()){e.next=4;break}return o({message:"Please fill all the field",type:"danger"}),e.abrupt("return");case 4:return e.next=6,t(u,p);case 6:s(u),n(),r(l._id);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){m(Object(d.a)(Object(d.a)({},p),{},Object(ve.a)({},e.target.id,e.target.value)))};return Object(i.jsxs)("form",{className:"mt-7",onSubmit:function(e){y(e)},children:[Object(i.jsx)("h1",{className:"text-xl p-4",children:"Create new ticket"}),Object(i.jsx)(he,{}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"name",className:"form_label",children:"Title"}),Object(i.jsx)("input",{type:"text",className:"form_input",id:"name",value:h,onChange:function(e){v(e)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"description",className:"form_label",children:"Description"}),Object(i.jsx)("textarea",{name:"description",id:"description",cols:"30",className:"form_input",value:O,onChange:function(e){v(e)},rows:"5"})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"priority",className:"form_label",children:"Priority"}),Object(i.jsxs)("select",{name:"",id:"priority",onChange:function(e){v(e)},value:f,children:[Object(i.jsx)("option",{value:"urgent",children:"Urgent"}),Object(i.jsx)("option",{value:"high",children:"High"}),Object(i.jsx)("option",{value:"medium",children:"Medium"}),Object(i.jsx)("option",{value:"low",children:"low"})]})]}),Object(i.jsx)("input",{type:"submit",className:"py-2 px-10 bg-secondary-500 text-white rounded hover:opacity-75 m-5",value:"Submit"})]})},yt=function(){var e=Object(a.useState)(!0),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Me(),s=r.getProject,o=r.currentProject,d=r.deleteProject,u=r.getProjects,b=Le().getTickets,x=me().user,p=Object(Oe.i)().id,m=Object(Oe.h)(),h=function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(p);case 2:n(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){h()}),[]);var O=function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=6;break}return e.next=3,d(p);case 3:u(),b(),m("/dashboard/projects");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(c)return Object(i.jsx)("div",{className:"w-full h-screen flex justify-center items-center",children:Object(i.jsx)(ke,{})});var f=o.name,y=(o.createdAt,o.createdBy,o.description),v=o._id;return Object(i.jsxs)("div",{className:"mt-10",children:[Object(i.jsxs)("div",{className:"flex p-5 shadow-md",children:[Object(i.jsxs)("div",{className:"flex-1",children:[Object(i.jsx)("h3",{className:"text-xl font-semibold",children:"Project Name"}),Object(i.jsx)("p",{className:"font-thin text-lg",children:f}),Object(i.jsx)(l.b,{to:"/dashboard/projects/".concat(v),className:"underline",children:"Details"})]}),Object(i.jsxs)("div",{className:"flex-1",children:[Object(i.jsx)("h3",{className:"text-xl font-semibold",children:"Project Description"}),Object(i.jsx)("p",{className:"font-thin text-lg",children:y})]})]}),Object(i.jsxs)("div",{className:"flex gap-3 mt-2",children:[("admin"===x.role||"project manager"===x.role||"adminDemo"===x.role)&&Object(i.jsx)("button",{className:"py-2 px-7 bg-green-600 text-white",onClick:function(){m("/dashboard/projects/".concat(p,"/edit"))},children:"Edit"}),("admin"===x.role||"adminDemo"===x.role)&&Object(i.jsx)("button",{className:"py-2 px-7 bg-red-600 text-white",onClick:O,children:"Delete"}),("admin"===x.role||"project manager"===x.role||"adminDemo"===x.role)&&Object(i.jsx)(l.b,{to:"/dashboard/projects/".concat(v,"/manageUsers"),className:"py-2 px-7 bg-blue-500 text-white",children:"Manage users"}),Object(i.jsx)(l.b,{to:"/dashboard/projects/".concat(v,"/addTicket"),className:"py-2 inline-block px-4 bg-gray-800 text-white hover:opacity-75",children:"Add new ticket"})]}),Object(i.jsxs)(Oe.e,{children:[Object(i.jsx)(Oe.c,{path:"/",element:Object(i.jsx)(pt,{})}),Object(i.jsx)(Oe.c,{path:"/manageUsers",element:Object(i.jsx)(Ot,{children:Object(i.jsx)(mt,{})})}),Object(i.jsx)(Oe.c,{path:"/edit",element:Object(i.jsx)(Ot,{children:Object(i.jsx)(ht,{})})}),Object(i.jsx)(Oe.c,{path:"/addTicket",element:Object(i.jsx)(ft,{})})]})]})},vt=function(){var e=Me().myProjects;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"p-5 text-2xl font-thin",children:"My projects"}),Object(i.jsx)("div",{className:"overflow-x-auto mt-10 w-full shadow-2xl",children:Object(i.jsx)(at,{projects:e})})]})},gt=function(e){var t=e.children,c=me().user;return"admin"===c.role||"adminDemo"===c.role?t:Object(i.jsx)("h1",{children:"Not authorized to access this route. Admin only!"})},Nt=function(){var e=tt().users,t=me().user,c=Me(),n=c.createProject,r=c.getProjects,s=c.getMyProjects,l=c.loading,o=c.alert,u=c.clearAlerts,b=se().setAlert,x=Object(a.useState)({name:"",description:"",users:[]}),p=Object(j.a)(x,2),m=p[0],h=p[1];Object(a.useEffect)((function(){o&&(b(o),u())}),[o]);var O=function(e){h(Object(d.a)(Object(d.a)({},m),{},Object(ve.a)({},e.target.id,e.target.value)))},f=function(){var e=Object(oe.a)(ie.a.mark((function e(c){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),m.name.trim()&&m.description.trim()){e.next=4;break}return b({message:"Please enter name and description",type:"danger"}),e.abrupt("return");case 4:return e.next=6,n(Object(d.a)(Object(d.a)({},m),{},{users:m.users.map((function(e){return e._id}))}));case 6:r(),s(t._id);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l?Object(i.jsx)("div",{className:"w-full h-screen flex items-center justify-center",children:Object(i.jsx)(ke,{})}):Object(i.jsxs)("div",{className:"mt-10",children:[Object(i.jsx)("h1",{className:"text-2xl p-5 font-thin",children:"Create new project"}),Object(i.jsx)(he,{}),Object(i.jsxs)("form",{className:"py-10",onSubmit:function(e){f(e)},children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"name",className:"form_label",children:"Name"}),Object(i.jsx)("input",{className:"form_input",id:"name",type:"text",value:m.name,onChange:function(e){O(e)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"description",className:"form_label",children:"Description"}),Object(i.jsx)("input",{className:"form_input",id:"description",type:"text",value:m.description,onChange:function(e){O(e)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"text-xl font-semibold m-5",children:"Asign users"}),Object(i.jsxs)("div",{className:"flex md:flex-row flex-col shadow-sm gap-10",children:[Object(i.jsxs)("div",{className:"flex-1",children:[Object(i.jsx)("h3",{className:"text-md font-thin",children:"All users"}),Object(i.jsx)("div",{className:"overflow-x-auto w-full shadow-2xl",children:Object(i.jsxs)("table",{className:"w-full text-left mt-5 shadow-md",children:[Object(i.jsx)("thead",{className:"table table-fixed",children:Object(i.jsxs)("tr",{className:"w-full table table-fixed bg-primary-500 text-white font-thin border-b-2 border-gray-800 border-opacity-50",children:[Object(i.jsx)("th",{children:"Name"}),Object(i.jsx)("th",{children:"Role"})]})}),Object(i.jsx)("tbody",{className:"block overflow-auto table-fixed",style:{maxHeight:"300px"},children:e&&e.map((function(e){var t=e.name,c=e._id,a=e.role;return Object(i.jsxs)("tr",{className:"w-full table table-fixed border-b border-gray-400 border-opacity-50 cursor-pointer",onClick:function(){!function(e){if(m.users.find((function(t){return t._id===e._id})))b({message:"User already exists!",type:"danger"});else{var t=Object(rt.a)(m.users);t.push(e),h(Object(d.a)(Object(d.a)({},m),{},{users:t}))}}(e)},children:[Object(i.jsx)("td",{children:t}),Object(i.jsx)("td",{className:"ml-10 font-semibold",children:a})]},c)}))})]})})]}),Object(i.jsxs)("div",{className:"flex-1",children:[Object(i.jsx)("h3",{className:"text-md font-thin",children:"Users in project"}),Object(i.jsx)("div",{className:"overflow-x-auto w-full shadow-2xl",children:Object(i.jsxs)("table",{className:"w-full text-left mt-5 shadow-md",children:[Object(i.jsx)("thead",{className:"table table-fixed",children:Object(i.jsxs)("tr",{className:"w-full table table-fixed bg-secondary-500 text-white font-thin border-b-2 border-gray-800 border-opacity-50",children:[Object(i.jsx)("th",{children:"Name"}),Object(i.jsx)("th",{children:"Role"})]})}),Object(i.jsx)("tbody",{className:"block overflow-auto table-fixed",style:{maxHeight:"300px"},children:m.users&&m.users.map((function(e){var t=e.name,c=e._id,a=e.role;return Object(i.jsxs)("tr",{className:"w-full table table-fixed border-b border-gray-400 border-opacity-50 cursor-pointer",onClick:function(){var e;e=c,h(Object(d.a)(Object(d.a)({},m),{},{users:m.users.filter((function(t){return t._id!==e}))}))},children:[Object(i.jsx)("td",{children:t}),Object(i.jsx)("td",{className:"ml-10 font-semibold",children:a})]},c)}))})]})})]})]})]}),Object(i.jsx)("input",{className:"py-2 px-10 bg-secondary-400 mt-5 mx-auto block text-white",type:"submit",value:"Submit"})]})]})},wt=function(){me().user;return Object(i.jsx)(a.Fragment,{children:Object(i.jsxs)(Oe.e,{children:[Object(i.jsx)(Oe.c,{path:"/",element:Object(i.jsxs)(gt,{children:[" ",Object(i.jsx)(nt,{})," "]})}),Object(i.jsx)(Oe.c,{path:"/myProjects",element:Object(i.jsx)(vt,{})}),Object(i.jsx)(Oe.c,{path:":id/*",element:Object(i.jsx)(yt,{})}),Object(i.jsx)(Oe.c,{path:"/createProject",element:Object(i.jsxs)(gt,{children:[" ",Object(i.jsx)(Nt,{})," "]})})]})})},kt=function(){var e=Le(),t=e.myTickets,c=e.getMyTickets,a=e.myTicketsCurrentPage,n=e.myTicketsTotalPages,r=me().user;return Object(i.jsxs)("div",{className:"w-full",children:[Object(i.jsx)("h1",{className:"text-xl m-5 font-thin",children:"My tickets"}),Object(i.jsx)(bt,{tickets:t}),Object(i.jsxs)("div",{className:"inline-flex gap-5 p-5 float-right",children:[Object(i.jsx)("button",{onClick:function(){a<=1||c(r._id,"&page=".concat(a-1))},children:"Prev"}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("span",{children:[a,"..."]}),Object(i.jsx)("span",{children:n})]}),Object(i.jsx)("button",{onClick:function(){a>=n||c(r._id,"&page=".concat(a+1))},children:"Next"})]})]})},Ct=function(e){var t=e.ticket,c=Object(a.useState)(Object(d.a)({},t)),n=Object(j.a)(c,2),r=n[0],s=n[1],l=se().setAlert,o=Le(),u=o.updateTicket,b=o.alert,x=o.getTickets,p=o.getTicket,m=o.getMyTickets,h=Me(),O=h.getProject,f=h.currentProject,y=me().user;Object(a.useEffect)((function(){O(t.project._id)}),[]),Object(a.useEffect)((function(){b&&l(b)}),[b]);var v=function(e){s(Object(d.a)(Object(d.a)({},r),{},Object(ve.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(oe.a)(ie.a.mark((function e(c){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,u(t._id,r);case 3:x(),p(t._id),m(y._id);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=r.name,w=r.description,k=r.priority,C=r.status,_=r.developer,T=!!["admin","project manager"].includes(y.role),S=!!["admin","project manager","developer"].includes(y.role),E=t.submitter._id===y._id;return Object(i.jsxs)("form",{onSubmit:function(e){g(e)},children:[Object(i.jsx)(he,{}),(T||E)&&Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"name",className:"form_label",children:"Title"}),Object(i.jsx)("input",{type:"text",className:"form_input",value:N,name:"name",id:"name",onChange:function(e){v(e)}})]}),(T||E)&&Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"description",className:"form_label",children:"Description"}),Object(i.jsx)("textarea",{rows:"5",type:"text",className:"form_input",value:w,name:"description",id:"description",onChange:function(e){v(e)}})]}),T&&Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"developer",className:"form_label",children:"Developer"}),Object(i.jsx)("select",{name:"developer",id:"developer",onChange:function(e){v(e)},value:_,children:f&&f.users.map((function(e){var t=e.name,c=e.role,a=e._id;return Object(i.jsx)("option",{value:a,children:"".concat(t,"  ").concat(c)},a)}))})]}),T&&Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"priority",className:"form_label",children:"Priority"}),Object(i.jsxs)("select",{name:"priority",id:"priority",onChange:function(e){v(e)},value:k,children:[Object(i.jsx)("option",{value:"urgent",children:"Urgent"}),Object(i.jsx)("option",{value:"high",children:"High"}),Object(i.jsx)("option",{value:"medium",children:"Medium"}),Object(i.jsx)("option",{value:"low",children:"low"})]})]}),S&&Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"status",className:"form_label",children:"Status"}),Object(i.jsxs)("select",{name:"status",id:"status",onChange:function(e){v(e)},value:C,children:[Object(i.jsx)("option",{value:"submitted",children:"Submitted"}),Object(i.jsx)("option",{value:"in progress",children:"In progress"}),Object(i.jsx)("option",{value:"in review",children:"In review"}),Object(i.jsx)("option",{value:"done",children:"done"})]})]}),Object(i.jsx)("input",{type:"submit",value:"Submit",className:"py-2 px-10 bg-blue-300 m-5 hover:opacity-75"})]})},_t=function(e){var t=e.comment,c=e.handleDelete,a=e.handleEdit,n=t.body,r=t.createdAt,s=t.user,l=t._id;return Object(i.jsxs)("div",{className:"py-3 rounded w-full px-5 shadow-lg bg-white mb-4 relative",children:[Object(i.jsxs)("div",{className:"flex gap-5 items-center",children:[Object(i.jsx)("h3",{className:"text-lg font-bold my-3",children:s.name}),Object(i.jsx)("span",{className:"font-thin text-sm",children:it(new Date(r))})]}),Object(i.jsx)("p",{className:"font-thin text-md",children:n}),Object(i.jsxs)("div",{className:"inline-flex absolute top-1/2 right-0 gap-1",style:{transform:"translateY(-50%)"},children:[Object(i.jsxs)("button",{onClick:function(){a(t)},children:[" ",Object(i.jsx)(Xe.c,{})]}),Object(i.jsxs)("button",{onClick:function(){c(l)},children:[" ",Object(i.jsx)(Te.c,{})]})]})]})},Tt=function(e){var t=e.setIsFormVisible,c=e.setEdit,n=e.edit,r=e.currentComment,s=Ke(),l=s.addComment,o=s.getComments,u=s.updateComment,b=Object(a.useState)(""),x=Object(j.a)(b,2),p=x[0],m=x[1],h=p.body,O=se().setAlert,f=Object(Oe.i)().id;Object(a.useEffect)((function(){n&&r&&m(Object(d.a)(Object(d.a)({},p),{},{body:r.body}))}),[n]);var y=function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(f,{body:p});case 2:o(f);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(r._id,{body:p});case 2:o(f);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("form",{className:"",onSubmit:function(e){!function(e){if(e.preventDefault(),""===p.trim())return O({message:"Please add comment",type:"danger"});n?(v(),t(!1),c(!1)):(y(),t(!1))}(e)},children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"body",className:"form_label",children:"Comment"}),Object(i.jsx)("textarea",{className:"form_input",name:"body",id:"body",cols:"30",value:h,placeholder:"Write your comment here...",onChange:function(e){!function(e){m(e.target.value)}(e)},rows:"5"})]}),n?Object(i.jsx)("button",{className:"w-full py-2 text-center mt-3 hover:opacity-75 transition-all bg-green-300 text-white",type:"submit",children:"Update"}):Object(i.jsx)("button",{className:"w-full py-2 text-center mt-3 hover:opacity-75 transition-all bg-secondary-700 text-white",type:"submit",children:"Send"})]})},St=function(){var e=Ke(),t=e.comments,c=e.alert,n=e.getComments,r=e.deleteComment,s=(e.updateComment,e.clearAlerts),l=Le().currentTicket,o=se().setAlert,d=Object(a.useState)(!1),u=Object(j.a)(d,2),b=u[0],x=u[1],p=Object(a.useState)(!1),m=Object(j.a)(p,2),h=m[0],O=m[1],f=Object(a.useState)(null),y=Object(j.a)(f,2),v=y[0],g=y[1];Object(a.useEffect)((function(){c&&(o(c),s())}),[c]);var N=function(e){x(!0),O(!0),g(e)},w=function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=4;break}return e.next=3,r(t);case 3:n(l._id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{className:"py-2 px-5 ".concat(b?"bg-red-500":"bg-secondary-700"," text-white hover:opacity-75 transition-opacity"),onClick:function(){b?(x(!1),O(!1)):x(!0)},children:b?"Close form":"Add comment"}),Object(i.jsx)(he,{}),Object(i.jsxs)("div",{className:"mt-5",children:[Object(i.jsx)("div",{className:"my-5",children:b&&Object(i.jsx)(Tt,{currentComment:v,edit:h,setEdit:O,setIsFormVisible:x})}),Object(i.jsx)("div",{children:t.map((function(e){return Object(i.jsx)(_t,{comment:e,handleEdit:N,handleDelete:w},e._id)}))})]})]})},Et=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!0),s=Object(j.a)(r,2),l=s[0],o=s[1],d=Le(),u=d.currentTicket,b=d.getTicket,x=d.getTickets,p=d.getMyTickets,m=d.deleteTicket,h=d.clearAlerts,O=d.alert,f=Ke().getComments,y=me().user,v=se().setAlert,g=Object(Oe.i)().id,N=Object(Oe.h)(),w=function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(g);case 2:return e.next=4,f(g);case 4:o(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(a.useEffect)((function(){w()}),[]),Object(a.useEffect)((function(){O&&(v(O),h())}),[O]),l)return Object(i.jsx)("div",{className:"flex items-center justify-center w-full h-screen",children:Object(i.jsx)(ke,{})});var k=u.name,C=u.description,_=u.project,T=u.submitter,S=u.priority,E=u.status,P=u.developer,A=u.createdAt,D=["admin","project manager","adminDemo"],U=!(!D.includes(y.role)&&T._id!==y._id&&P._id!==y._id),M=!(!D.includes(y.role)&&T._id!==y.id),R=function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=6;break}return e.next=3,m(g);case 3:N(-1),x(),p(y._id);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{children:Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{className:"inline-block m-5 text-2xl px-5 font-thin",onClick:function(){n(!1)},children:"Details for ticket"}),Object(i.jsxs)("div",{className:"inline-flex gap-5",children:[U&&Object(i.jsx)("button",{className:"py-2 px-4 bg-green-500 text-white hover:opacity-75",onClick:function(){n(!0)},children:"Edit"}),M&&Object(i.jsx)("button",{className:"py-2 px-4 bg-red-400 text-white hover:opacity-75",onClick:R,children:"Delete"})]}),Object(i.jsx)("div",{className:"w-full",children:c?Object(i.jsx)(Ct,{ticket:u}):Object(i.jsxs)("div",{className:"flex flex-col gap-10 md:gap-0 md:flex-row justify-between items-start",children:[Object(i.jsxs)("div",{className:"w-full grid grid-cols-1 gap-5 shadow-xl rounded-md p-10 sm:grid-cols-2 bg-white",style:{flex:"2"},children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"text-xl font-semibold",children:"Title"}),Object(i.jsx)("p",{className:"font-thin",children:k})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"text-xl font-semibold",children:"Description"}),Object(i.jsx)("p",{className:"font-thin",children:C})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"text-xl font-semibold",children:"Assigned developer"}),Object(i.jsx)("p",{className:"font-thin",children:P?P.name:"-"})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"text-xl font-semibold",children:"Submitter"}),Object(i.jsx)("p",{className:"font-thin",children:T.name})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"text-xl font-semibold",children:"Project"}),Object(i.jsx)("p",{className:"font-thin",children:_.name})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"text-xl font-semibold",children:"Ticket priority"}),Object(i.jsx)("p",{className:"font-thin",children:S})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"text-xl font-semibold",children:"Ticket status"}),Object(i.jsx)("p",{className:"font-thin",children:E})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"text-xl font-semibold",children:"Created at"}),Object(i.jsx)("p",{className:"font-thin",children:it(new Date(A))})]})]}),Object(i.jsx)("div",{className:"flex-1 w-full px-5",children:Object(i.jsx)(St,{})})]})})]})})},Pt=function(){return Object(i.jsx)(a.Fragment,{children:Object(i.jsxs)(Oe.e,{children:[Object(i.jsx)(Oe.c,{path:"/",element:Object(i.jsx)(kt,{})}),Object(i.jsx)(Oe.c,{path:":id",element:Object(i.jsx)(Et,{})})]})})},At=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)("submitter"),s=Object(j.a)(r,2),l=s[0],o=s[1],d=tt(),u=d.users,b=d.loading,x=d.updateUser,p=d.getUsers,m=d.alert,h=d.clearAlerts,O=se().setAlert,f=Object(a.useRef)(null);Object(a.useEffect)((function(){m&&(O(m),h())}),[m]);var y=function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==c&&""!==l){e.next=4;break}return O({message:"Please select user and role",type:"danger"}),e.abrupt("return");case 4:return e.next=6,x(c,{role:l});case 6:p(),o(""),n("submitter");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return b?Object(i.jsx)("div",{className:"w-full h-screen flex justify-center items-center",children:Object(i.jsx)(ke,{})}):Object(i.jsxs)("form",{className:"w-full",onSubmit:function(e){y(e)},children:[Object(i.jsxs)("div",{className:"",children:[Object(i.jsx)("h3",{className:"text-xl p-5",children:"Select user"}),Object(i.jsx)(he,{}),Object(i.jsx)("div",{className:"overflow-x-auto w-full shadow-2xl",children:Object(i.jsx)(xt,{users:u,handleClick:function(e,t){f.current.querySelectorAll("tr").forEach((function(e){e.classList.remove("active_user")})),e.target.parentElement.classList.add("active_user"),n(t)},usersList:f})})]}),Object(i.jsxs)("div",{className:"mt-3",children:[Object(i.jsx)("h3",{className:"text-xl p-5",children:"Select role"}),Object(i.jsxs)("select",{name:"selectedRole",id:"",value:l,onChange:function(e){!function(e){"selectedUser"!==e.target.name?"selectedRole"!==e.target.name||o(e.target.value):n(e.target.value)}(e)},children:[Object(i.jsx)("option",{value:"submitter",children:"Submitter"}),Object(i.jsx)("option",{value:"developer",children:"Developer"}),Object(i.jsx)("option",{value:"project manager",children:"Project manager"}),Object(i.jsx)("option",{value:"admin",children:"Admin"}),Object(i.jsx)("option",{value:"adminDemo",children:"Admin Demo"}),Object(i.jsx)("option",{value:"submitterDemo",children:"Dubmitter Demo"}),Object(i.jsx)("option",{value:"developerDemo",children:"Developer Demo"})]})]}),Object(i.jsx)("input",{type:"submit",className:"py-2 px-10 bg-secondary-500 text-white hover:opacity-75 mx-auto block mt-5 text-center"})]})},Dt=function(){var e=tt(),t=e.getUsers,c=(e.loading,e.users);return Object(a.useEffect)((function(){c||t()}),[]),Object(i.jsxs)(a.Fragment,{children:[Object(i.jsx)("h1",{className:"text-3xl font-light my-10",children:"Manage user roles"}),Object(i.jsx)("div",{children:Object(i.jsx)(At,{})})]})},Ut=function(){var e=me().isAuthenticated,t=Object(Oe.h)();return Object(a.useEffect)((function(){t(e?"/dashboard":"/login")}),[e]),Object(i.jsxs)("div",{children:[Object(i.jsx)(o,{}),"Home"]})},Mt=function(){var e=Le(),t=e.tickets,c=e.getTickets,a=e.currentPage,n=e.totalPages;return Object(i.jsxs)("div",{className:"",children:[Object(i.jsx)(bt,{tickets:t}),Object(i.jsxs)("div",{className:"inline-flex gap-5 p-5 mb-10 float-right",children:[Object(i.jsx)("button",{onClick:function(){a<=1||c("?page=".concat(a-1))},children:"Prev"}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("span",{children:[a,"..."]}),Object(i.jsx)("span",{children:n})]}),Object(i.jsx)("button",{onClick:function(){a>=n||c("?page=".concat(a+1))},children:"Next"})]})]})},Rt=function(){var e=tt().users,t=Me().projects,c=Le().tickets;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"flex gap-2 justify-evenly md:flex-row flex-col ",children:[Object(i.jsxs)("div",{className:"flex p-3 flex-1 items-center justify-center text-center text-black shadow-lg bg-primary-400",children:[Object(i.jsx)("span",{className:"font-thin uppercase text-xl",children:"Users:"}),Object(i.jsx)("span",{className:"font-semibold uppercase ml-3 text-4xl",children:e&&e.length})]}),Object(i.jsxs)("div",{className:"flex p-3 flex-1 items-center justify-center text-center text-black bg-primary-300 shadow-lg",children:[Object(i.jsx)("span",{className:"font-thin uppercase text-xl",children:"Projects:"}),Object(i.jsx)("span",{className:"font-semibold uppercase ml-3 text-4xl",children:t&&t.length})]}),Object(i.jsxs)("div",{className:"p-3 flex gap-10 flex-1 items-center justify-center text-center text-black bg-primary-200 shadow-lg",children:[Object(i.jsx)("span",{className:"font-thin uppercase text-xl",children:"Tickets:"}),Object(i.jsxs)("ul",{className:"flex md:flex-col flex-row",children:[Object(i.jsxs)("li",{className:"py-1 px-2 bg-red-800 text-left text-white",children:[Object(i.jsx)("span",{children:"Urgent: "}),Object(i.jsx)("span",{children:c&&c.filter((function(e){return"urgent"===e.priority})).length})]}),Object(i.jsxs)("li",{className:"py-1 px-2 bg-red-400 text-left",children:[Object(i.jsx)("span",{children:"High: "}),Object(i.jsx)("span",{children:c&&c.filter((function(e){return"high"===e.priority})).length})]}),Object(i.jsxs)("li",{className:"py-1 px-2 bg-yellow-400 text-black text-left",children:[Object(i.jsx)("span",{children:"Medium: "}),Object(i.jsx)("span",{children:c&&c.filter((function(e){return"medium"===e.priority})).length})]}),Object(i.jsxs)("li",{className:"py-1 px-2 bg-gray-300 text-black text-left",children:[Object(i.jsx)("span",{children:"Low: "}),Object(i.jsx)("span",{children:c&&c.filter((function(e){return"low"===e.priority})).length})]})]})]})]}),Object(i.jsx)("div",{className:"text-center",children:Object(i.jsx)("h1",{className:"text-xl inline-block p-2 my-10  border-b border-solid border-gray-500",children:"All tickets"})}),Object(i.jsx)(Mt,{})]})},Ft=function(){var e=me(),t=e.user,c=e.loadUser,n=tt(),r=n.updateUser,s=n.alert,l=n.clearAlerts,o=se().setAlert,u=Object(a.useState)(!1),b=Object(j.a)(u,2),x=b[0],p=b[1],m=Object(a.useState)(Object(d.a)({},t)),h=Object(j.a)(m,2),O=h[0],f=h[1],y=O.email,v=O.name,g=O.role;Object(a.useEffect)((function(){s&&(o(s),l())}),[s]);var N=function(e){f(Object(d.a)(Object(d.a)({},O),{},Object(ve.a)({},e.target.name,e.target.value)))},w=function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t._id,O);case 2:c();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("form",{className:"",onSubmit:function(e){!function(e){e.preventDefault(),""!==v.trim()&&""!==y.trim()?v!==t.name||y!==t.email?w():o({message:"No changes made!",type:"info"}):o({message:"Please enter name and email",type:"danger"})}(e)},children:[Object(i.jsxs)("div",{className:"max-w-xl mx-auto",children:[Object(i.jsx)("h1",{className:"m-10 text-semi-bold text-3xl",children:"Profile"}),Object(i.jsx)(he,{}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"name",className:"form_label",children:"Name"}),Object(i.jsx)("input",{type:"text",className:"py-2 px-5 w-full font-thin text-xl rounded-full\n            focus:outline-none\n          ".concat(x&&"ring-2 ring-blue-300 focus:ring-3 focus:ring-4"),readOnly:!x,id:"name",name:"name",onChange:function(e){N(e)},value:v})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"email",className:"form_label",children:"Email"}),Object(i.jsx)("input",{type:"text",className:"py-2 px-5 w-full font-thin text-xl rounded-full\n            focus:outline-none \n            ".concat(x&&"ring-2 ring-blue-300 focus:ring-4"),readOnly:!x,id:"email",name:"email",onChange:function(e){N(e)},value:y})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"role",className:"form_label",children:"Role"}),Object(i.jsx)("input",{type:"text",className:"py-2 px-5 w-full font-thin text-xl rounded-full \r focus:outline-none",readOnly:!0,value:g})]})]}),x?Object(i.jsxs)("div",{className:"flex gap-5 mt-7 items-center justify-center",children:[Object(i.jsx)("button",{className:"py-2 px-10 rounded-full bg-yellow-400 text-white  hover:opacity-75 transition-all",type:"submit",children:"Update"}),Object(i.jsx)("button",{onClick:function(){p(!1),f(Object(d.a)({},t))},children:Object(i.jsx)(Ee.a,{className:"text-2xl hover:opacity-75 transition-opacity"})})]}):Object(i.jsx)("button",{className:"py-2 px-10 rounded-full bg-primary-700 text-white mt-7 mx-auto block hover:opacity-75 transition-all",onClick:function(){p(!0)},children:"Edit"})]})},It=function(){return Object(i.jsx)("div",{children:Object(i.jsx)(Ft,{})})};var Lt=function(){return Object(i.jsx)(l.a,{children:Object(i.jsxs)(Oe.e,{children:[Object(i.jsx)(Oe.c,{path:"/login",element:Object(i.jsx)(ye,{})}),Object(i.jsx)(Oe.c,{path:"/register",element:Object(i.jsx)(Ne,{})}),Object(i.jsx)(Oe.c,{path:"/",element:Object(i.jsx)(Ut,{})}),Object(i.jsxs)(Oe.c,{path:"/dashboard/*",element:Object(i.jsxs)(Ce,{children:[" ",Object(i.jsx)(ct,{})," "]}),children:[Object(i.jsx)(Oe.c,{path:"",element:Object(i.jsx)(Rt,{})}),Object(i.jsx)(Oe.c,{path:"projects/*",element:Object(i.jsx)(wt,{})}),Object(i.jsx)(Oe.c,{path:"manageRoles/*",element:Object(i.jsxs)(gt,{children:[" ",Object(i.jsx)(Dt,{})," "]})}),Object(i.jsx)(Oe.c,{path:"tickets/*",element:Object(i.jsx)(Pt,{})}),Object(i.jsx)(Oe.c,{path:"userProfile",element:Object(i.jsx)(It,{})})]})]})})};s.a.render(Object(i.jsx)(n.a.StrictMode,{children:Object(i.jsx)(Be,{children:Object(i.jsx)(re,{children:Object(i.jsx)(pe,{children:Object(i.jsx)(et,{children:Object(i.jsx)(Ue,{children:Object(i.jsx)(Ie,{children:Object(i.jsx)(Je,{children:Object(i.jsx)(Lt,{})})})})})})})})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.2f0b5c29.chunk.js.map